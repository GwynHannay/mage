version: 2

sources:
  - name: meds_vitamins
    database: datalake
    schema: public
    tables:
        - name: stock_detail
          description: Daily replication of Google Sheet data for current medication and vitamin stocks.
          columns:
            - name: "__google_spreadsheet_id"
              description: ID of the Google Sheet that stores this data.
            - name: "__google_sheet_id"
              description: ID of the tab in the Google Sheet storing this data.
            - name: "__google_sheet_row"
              description: Number of the row for this record.
            - name: item
              description: Name of the medication/vitamin.
            - name: qty
              description: Number of items remaining.
            - name: opened
              description: Whether or not this record indicates an opened container.
            - name: size
              description: Number of items within this container.
            - name: expiration
              description: Date this item is set to expire (stored as a timestamp with time zone in datalake).
            - name: dose
              description: Number of items used each day.
            - name: days
              description: Calculated days remaining based on either qty * size (if unopened) / dose, or just qty / dose if opened.
            - name: last_date
              description: Calculated date this item will run out based on the next Saturday (when these are dispensed for the week) and the days calculated.
            - name: "_mage_created_at"
              description: Autogenerated timestamp with time zone for record creation by Mage.
            - name: "_mage_updated_at"
              description: Autogenerated timestamp with time zone for record update by Mage.